{"version":3,"sources":["all.js"],"names":["api_path","baseUrl","product_path","carts_path","customOrder_path","categorySelector","document","querySelector","productList","cartList","sendOrderInfoBtn","productsData","cartsData","addEventListener","productFilter","addCart","deleteCartProduct","sendOrderInfo","init","getProductsData","getCartListData","axios","get","then","res","data","products","renderProductList","renderCategorySelector","err","errData","response","status","console","log","message","categoryAry","forEach","item","push","category","filter","index","ary","indexOf","optionStr","innerHTML","listStr","price","toLocaleString","originPrice","origin_price","images","id","title","renderCartList","str","carts","product","totalPrice","quantity","finalTotal","e","target","value","filteredAry","nodeName","dataset","obj","post","js","spanAry","querySelectorAll","el","setAttribute","form","constraints","customerName","presence","customerTel","format","pattern","flags","length","minimum","customerEmail","email","customerAdd","errors","validate","keys","Object","key","classList","toggle","trim"],"mappings":"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","file":"all.js","sourcesContent":["// 產品頁面\n// API\nconst api_path = 'calon';\nconst baseUrl = 'https://livejs-api.hexschool.io';\nconst product_path = `api/livejs/v1/customer/${api_path}/products`;\nconst carts_path = `api/livejs/v1/customer/${api_path}/carts`;\nconst customOrder_path = `api/livejs/v1/customer/${api_path}/orders`;\n\n// DOM\nconst categorySelector = document.querySelector('[name=\"categorySelector\"]');\nconst productList = document.querySelector('.productList');\nconst cartList = document.querySelector('.cartList');\nconst sendOrderInfoBtn = document.querySelector('[data-js=\"sendOrderInfoBtn\"');\n\n// data\nlet productsData;\nlet cartsData;\n\n// event\ncategorySelector.addEventListener('change', productFilter);\nproductList.addEventListener('click', addCart);\ncartList.addEventListener('click', deleteCartProduct);\nsendOrderInfoBtn.addEventListener('click', sendOrderInfo);\n\ninit();\n\nfunction init() {\n  getProductsData();\n  getCartListData();\n};\n\nfunction getProductsData() {\n  axios.get(`${baseUrl}/${product_path}`).then(function (res) {\n    productsData = res.data.products;\n    renderProductList(productsData);\n    renderCategorySelector();\n  }).catch(function (err) {\n    let errData = err.response.data;\n    if (errData.status === false) {\n      console.log(err.response.data.message);\n    }\n  })\n}\n\nfunction renderCategorySelector() {\n  let categoryAry = [];\n\n  productsData.forEach(function (item) {\n    categoryAry.push(item.category);\n  });\n  categoryAry = categoryAry.filter(function (item, index, ary) {\n    return ary.indexOf(item) == index;\n  });\n\n  let optionStr = '<option value=\"全部\" selected>全部</option>';\n\n  categoryAry.forEach(function (item) {\n    optionStr += `<option value=\"${item}\">${item}</option>`;\n  });\n  categorySelector.innerHTML = optionStr;\n};\n\nfunction renderProductList(data) {\n  let listStr = '';\n  data.forEach(function (item) {\n    let price = item.price.toLocaleString();\n    let originPrice = item.origin_price.toLocaleString();\n    listStr += `\n      <li>\n        <div class=\"bg-cover h-75 relative\" style=\"background: url('${item.images}');\">\n          <div class=\"absolute top-3 -right-1 bg-dark text-white py-2 px-6\">新品</div>\n        </div>\n        <button class=\"py-3 mb-2 bg-dark hover:bg-secondary text-white text-lg w-full transition duration-500\" data-id=\"${item.id}\">加入購物車</button>\n        <div class=\"text-lg\">\n          <h5>${item.title}</h5>\n          <p class=\"line-through\">NT$${originPrice}</p>\n          <p class=\"text-3xl\">NT$${price}</p>\n        </div>\n      </li>\n    `\n  });\n  productList.innerHTML = listStr;\n};\n\nfunction getCartListData() {\n  axios.get(`${baseUrl}/${carts_path}`).then(function (res) {\n    cartsData = res.data;\n    renderCartList();\n  }).catch(function (err) {\n    let errData = err.response.data;\n    if (errData.status === false) {\n      console.log(err.response.data.message);\n    };\n  });\n};\n\nfunction renderCartList() {\n  let str = '';\n  cartsData.carts.forEach(function (item) {\n    let price = item.product.price.toLocaleString();\n    let totalPrice = (item.product.price * item.quantity).toLocaleString();\n    str += `\n    <tr class=\"border-b border-gray-300\">\n    <td class=\"flex items-center py-5\">\n    <img class=\"w-20 h-20 object-cover mr-4\" src=\"${item.product.images}\" alt=\"產品圖片\">\n    <h5>${item.product.title}</h5>\n    </td>\n    <td class=\"py-5\">NT$${price}</td>\n    <td class=\"py-5\">\n    <input class=\"w-12 border border-gray-300 rounded px-2 text-center\" data-js=\"quantityInput\" type=\"text\" value=\"${item.quantity}\">\n    </td>\n    <td class=\"py-5\">NT$${totalPrice}</td>\n    <td class=\"text-center py-5\">\n    <button class=\"material-icons hover:text-danger transition duration-500 p-2\" href=\"#\" data-js=\"deleteProductBtn\" data-id=\"${item.id}\">close</button>\n    </td>\n    </tr>\n    `;\n  });\n  let finalTotal = cartsData.finalTotal.toLocaleString();\n  str += `\n    <tr>\n      <td class=\"py-5\">\n        <button class=\"border rounded py-2 px-5 hover:bg-dark hover:text-white transition duration-500\" data-js=\"deleteAllProductsBtn\">刪除所有品項</button>\n      </td>\n      <td class=\"py-5\"></td>\n      <td class=\"py-5\"></td>\n      <td class=\"py-5\">總金額</td>\n      <td class=\"py-5 text-3xl\">NT$${finalTotal}</td>\n    </tr>\n    `;\n  cartList.innerHTML = str;\n};\n\nfunction productFilter(e) {\n  let category = e.target.value;\n  let filteredAry = [];\n  if (category === '全部') {\n    renderProductList(productsData);\n  } else {\n    productsData.forEach(function (item) {\n      if (item.category == category) {\n        filteredAry.push(item);\n      };\n    });\n    renderProductList(filteredAry);\n  };\n};\n\nfunction addCart(e) {\n  if (e.target.nodeName !== 'BUTTON') { return };\n  let id = e.target.dataset.id;\n  let obj = {\n    \"data\": {\n      \"productId\": id,\n      \"quantity\": 1\n    }\n  };\n  axios.post(`${baseUrl}/${carts_path}`, obj).then(function (res) {\n    getCartListData();\n  }).catch(function (err) {\n    let errData = err.response.data;\n    if (errData.status === false) {\n      console.log(err.response.data.message);\n    }\n  });\n};\n\nfunction deleteCartProduct(e) {\n  if (e.target.dataset.js !== 'deleteProductBtn' && e.target.dataset.js !== 'deleteAllProductsBtn') {\n    return;\n  } else if (e.target.dataset.js === 'deleteAllProductsBtn') {\n    axios.delete(`${baseUrl}/${carts_path}`).then(function (res) {\n      getCartListData();\n    }).catch(function (err) {\n      let errData = err.response.data;\n      if (errData.status === false) {\n        console.log(err.response.data.message);\n      }\n    })\n  } else {\n    let id = e.target.dataset.id;\n    axios.delete(`${baseUrl}/${carts_path}/${id}`).then(function (res) {\n      getCartListData();\n    }).catch(function (err) {\n      let errData = err.response.data;\n      if (errData.status === false) {\n        console.log(err.response.data.message);\n      }\n    });\n  };\n};\n\nfunction sendOrderInfo() {\n  let spanAry = document.querySelectorAll(`span[data-msg]`);\n\n  spanAry.forEach(function (el) {\n    el.setAttribute('class', 'invisible text-danger')\n  });\n\n  const form = document.querySelector('[data-js=\"orderForm\"]');\n  let constraints = {\n    customerName: {\n      presence: {\n        message: '^請輸入您的姓名'\n      },\n    },\n    customerTel: {\n      presence: {\n        message: '^請輸入您的聯絡電話'\n      },\n      format: {\n        pattern: '[0-9]+',\n        flags: 'i',\n        message: '^聯絡電話格式不正確'\n      },\n      length: {\n        minimum: 9,\n        message: '^聯絡電話格式不正確'\n      }\n    },\n    customerEmail: {\n      presence: {\n        message: '^請輸入您的 Email'\n      },\n      email: {\n        message: '^Email 格式不正確'\n      }\n    },\n    customerAdd: {\n      presence: {\n        message: '^請輸入您的寄送地址'\n      }\n    }\n  };\n\n  let errors = validate(form, constraints);\n  if (errors) {\n    let keys = Object.keys(errors);\n    keys.forEach(function (key) {\n      let el = document.querySelector(`[data-msg=${key}]`);\n      el.innerHTML = `<i class=\"fas fa-exclamation-circle mr-1\"></i>${errors[key][0]}`;\n      el.classList.toggle('invisible');\n    });\n  } else {\n    let obj = {\n      \"data\": {\n        \"user\": {\n          \"name\": document.querySelector('#customerName').value.trim(),\n          \"tel\": document.querySelector('#customerTel').value.trim(),\n          \"email\": document.querySelector('#customerEmail').value.trim(),\n          \"address\": document.querySelector('#customerAdd').value.trim(),\n          \"payment\": document.querySelector('#paymentMethod').value.trim()\n        }\n      }\n    };\n\n    axios.post(`${baseUrl}/${customOrder_path}`, obj).then(function (res) {\n      console.log(res);\n    }).catch(function (err) {\n      let errData = err.response.data;\n      if (errData.status === false) {\n        console.log(err.response.data.message);\n      }\n    })\n  };\n};\n\n\n\n"]}