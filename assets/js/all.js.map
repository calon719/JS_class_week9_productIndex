{"version":3,"sources":["all.js"],"names":["api_path","baseUrl","product_path","carts_path","customOrder_path","categorySelector","document","querySelector","productList","cartList","sendOrderInfoBtn","productsData","cartsData","addEventListener","productFilter","addCart","deleteCartProduct","sendOrderInfo","changeQuantity","init","getProductsData","axios","get","then","res","data","products","renderCategorySelector","getCartListData","err","errData","response","status","console","log","message","categoryAry","forEach","item","push","category","filter","index","ary","indexOf","optionStr","innerHTML","renderProductList","listStr","check","carts","some","product","id","price","toLocaleString","originPrice","origin_price","images","title","cartMsg","cartTable","setAttribute","length","renderCartList","str","totalPrice","quantity","finalTotal","value","filteredAry","e","target","nodeName","dataset","obj","post","popUpSuccessMsg","js","popUp","btnProp","getAttribute","Object","is","spanAry","querySelectorAll","el","form","constraints","customerName","presence","customerTel","format","pattern","flags","minimum","customerEmail","email","customerAdd","errors","validate","keys","key","classList","toggle","nameValue","telValue","emailValue","addressValue","paymentValue","trim","orderInputs","quantityNotChanged","isNaN","Math","round","Number","patch","popUpMsg","textContent","styleOpacity","parseFloat","style","opacity","fadeInBlock","window","setInterval","clearInterval","fadeOutBlock"],"mappings":"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","file":"all.js","sourcesContent":["// 產品頁面\n// API\nconst api_path = 'calon';\nconst baseUrl = 'https://livejs-api.hexschool.io';\nconst product_path = `api/livejs/v1/customer/${api_path}/products`;\nconst carts_path = `api/livejs/v1/customer/${api_path}/carts`;\nconst customOrder_path = `api/livejs/v1/customer/${api_path}/orders`;\n\n// DOM\nconst categorySelector = document.querySelector('[name=\"categorySelector\"]');\nconst productList = document.querySelector('.productList');\nconst cartList = document.querySelector('.cartList');\nconst sendOrderInfoBtn = document.querySelector('[data-js=\"sendOrderInfoBtn\"');\n\n// data\nlet productsData;\nlet cartsData;\n\n// event\ncategorySelector.addEventListener('change', productFilter);\nproductList.addEventListener('click', addCart);\ncartList.addEventListener('click', deleteCartProduct);\nsendOrderInfoBtn.addEventListener('click', sendOrderInfo);\ncartList.addEventListener('change', changeQuantity);\n\ninit();\n\nfunction init() {\n  getProductsData();\n};\n\nfunction getProductsData() {\n  axios.get(`${baseUrl}/${product_path}`).then(function (res) {\n    productsData = res.data.products;\n    renderCategorySelector();\n    getCartListData(); // 先跑購物車資料 後面渲染 productList 需要購物車資料\n  }).catch(function (err) {\n    let errData = err.response.data;\n    if (errData.status === false) {\n      console.log(err.response.data.message);\n    };\n  });\n};\n\nfunction renderCategorySelector() {\n  let categoryAry = [];\n\n  productsData.forEach(function (item) {\n    categoryAry.push(item.category);\n  });\n  categoryAry = categoryAry.filter(function (item, index, ary) {\n    return ary.indexOf(item) == index;\n  });\n\n  let optionStr = '<option value=\"全部\" selected>全部</option>';\n\n  categoryAry.forEach(function (item) {\n    optionStr += `<option value=\"${item}\">${item}</option>`;\n  });\n  categorySelector.innerHTML = optionStr;\n};\n\nfunction renderProductList(data) {\n  let listStr = '';\n  data.forEach(function (item) {\n    let check = cartsData.carts.some(function (product) { return product.product.id == item.id });\n    let price = item.price.toLocaleString();\n    let originPrice = item.origin_price.toLocaleString();\n    listStr += `\n      <li>\n        <div class=\"bg-cover h-75 relative\" style=\"background: url('${item.images}');\">\n          <div class=\"absolute top-3 -right-1 bg-dark text-white py-2 px-6\">新品</div>\n        </div>\n        <button class=\"py-3 mb-2 ${check ? 'bg-primary' : 'bg-dark'} ${check ? '' : 'hover:bg-secondary'} text-white text-lg w-full\n        transition duration-500 ${check ? 'cursor-default' : ''}\" data-js=\"addCartBtn\" data-id=\"${item.id}\" ${check ? 'disabled' : ''}>\n          ${check ? '已加入購物車' : '加入購物車'}\n        </button>\n        <div class=\"text-lg\">\n          <h5>${item.title}</h5>\n          <p class=\"line-through\">NT$${originPrice}</p>\n          <p class=\"text-3xl\">NT$${price}</p>\n        </div>\n      </li>\n    `\n  });\n  productList.innerHTML = listStr;\n};\n\nfunction getCartListData() {\n  axios.get(`${baseUrl}/${carts_path}`).then(function (res) {\n    cartsData = res.data;\n    productFilter();\n\n    const cartMsg = document.querySelector('p[data-js=\"cartMsg\"]');\n    const cartTable = document.querySelector('table[data-js=\"cartMsg\"]');\n    cartMsg.setAttribute('data-cartMsg', true);\n    cartTable.setAttribute('data-cartMsg', false);\n    if (cartsData.carts.length === 0) {\n      return;\n    } else {\n      cartMsg.setAttribute('data-cartMsg', false);\n      cartTable.setAttribute('data-cartMsg', true);\n      renderCartList();\n    }\n  }).catch(function (err) {\n    let errData = err.response.data;\n    if (errData.status === false) {\n      console.log(err.response.data.message);\n    };\n  });\n};\n\nfunction renderCartList() {\n  let str = '';\n  cartsData.carts.forEach(function (item) {\n    let price = item.product.price.toLocaleString();\n    let totalPrice = (item.product.price * item.quantity).toLocaleString();\n    str += `\n    <tr class=\"border-b border-gray-300\">\n    <td class=\"flex items-center py-5\">\n    <img class=\"w-20 h-20 object-cover mr-4\" src=\"${item.product.images}\" alt=\"產品圖片\">\n    <h5>${item.product.title}</h5>\n    </td>\n    <td class=\"py-5\">NT$${price}</td>\n    <td class=\"py-5\">\n    <input class=\"w-12 border border-gray-300 rounded px-2 text-center\" data-id=\"${item.id}\" data-js=\"quantityInput\" type=\"text\" value=\"${item.quantity}\">\n    </td>\n    <td class=\"py-5\">NT$${totalPrice}</td>\n    <td class=\"text-center py-5\">\n    <button class=\"material-icons hover:text-danger transition duration-500 p-2\" href=\"#\" data-js=\"deleteProductBtn\" data-id=\"${item.id}\">close</button>\n    </td>\n    </tr>\n    `;\n  });\n  let finalTotal = cartsData.finalTotal.toLocaleString();\n  str += `\n    <tr>\n      <td class=\"py-5\">\n        <button class=\"border rounded py-2 px-5 hover:bg-dark hover:text-white transition duration-500\" data-js=\"deleteAllProductsBtn\">刪除所有品項</button>\n      </td>\n      <td class=\"py-5\"></td>\n      <td class=\"py-5\"></td>\n      <td class=\"py-5\">總金額</td>\n      <td class=\"py-5 text-3xl\">NT$${finalTotal}</td>\n    </tr>\n    `;\n  cartList.innerHTML = str;\n};\n\nfunction productFilter() {\n  let category = categorySelector.value;\n  let filteredAry = [];\n  if (category === '全部') {\n    renderProductList(productsData);\n  } else {\n    productsData.forEach(function (item) {\n      if (item.category == category) {\n        filteredAry.push(item);\n      };\n    });\n    renderProductList(filteredAry);\n  };\n};\n\nfunction addCart(e) {\n  if (e.target.nodeName !== 'BUTTON') { return };\n  let id = e.target.dataset.id;\n  let obj = {\n    \"data\": {\n      \"productId\": id,\n      \"quantity\": 1\n    }\n  };\n  axios.post(`${baseUrl}/${carts_path}`, obj).then(function (res) {\n    getCartListData();\n    productFilter(); // 不呼叫 renderProductList() 避免已篩選渲染的 product list 出錯\n    popUpSuccessMsg('addCartBtn');\n  }).catch(function (err) {\n    let errData = err.response.data;\n    if (errData.status === false) {\n      console.log(err.response.data.message);\n    }\n  });\n};\n\nfunction deleteCartProduct(e) {\n  if (e.target.dataset.js !== 'deleteProductBtn' && e.target.dataset.js !== 'deleteAllProductsBtn') {\n    return;\n  } else if (e.target.dataset.js === 'deleteAllProductsBtn') { // 刪除購物車全部商品\n    const popUp = document.querySelector('[data-js=\"doubleCheckpopUp\"]');\n    popUp.setAttribute('data-popUp', true);\n    popUp.addEventListener('click', function (e) {\n      let btnProp = e.target.getAttribute('data-dblCheckBtn');\n      // double check\n      if (btnProp === 'cancel' || Object.is(popUp, e.target)) { // 按取消或非訊息視窗時隱藏 double check div\n        popUp.setAttribute('data-popUp', false);\n      } else if (btnProp === 'delete') {\n        axios.delete(`${baseUrl}/${carts_path}`).then(function (res) {\n          getCartListData();\n        }).catch(function (err) {\n          let errData = err.response.data;\n          if (errData.status === false) {\n            console.log(err.response.data.message);\n          };\n        }).then(function () {\n          popUp.setAttribute('data-popUp', false);\n        });\n      };\n    });\n  } else { // 刪除購物車單一商品\n    let id = e.target.dataset.id;\n    axios.delete(`${baseUrl}/${carts_path}/${id}`).then(function (res) {\n      getCartListData();\n    }).catch(function (err) {\n      let errData = err.response.data;\n      if (errData.status === false) {\n        console.log(err.response.data.message);\n      }\n    });\n  };\n};\n\nfunction sendOrderInfo() {\n  // 錯誤訊息初始化\n  let spanAry = document.querySelectorAll(`span[data-msg]`);\n  spanAry.forEach(function (el) {\n    el.setAttribute('class', 'invisible text-danger');\n  });\n\n  // 表單驗證\n  const form = document.querySelector('[data-js=\"orderForm\"]');\n  let constraints = {\n    customerName: {\n      presence: {\n        message: '^請輸入您的姓名'\n      },\n    },\n    customerTel: {\n      presence: {\n        message: '^請輸入您的聯絡電話'\n      },\n      format: {\n        pattern: '[0-9]+',\n        flags: 'i',\n        message: '^聯絡電話格式不正確'\n      },\n      length: {\n        minimum: 9,\n        message: '^聯絡電話格式不正確'\n      }\n    },\n    customerEmail: {\n      presence: {\n        message: '^請輸入您的 Email'\n      },\n      email: {\n        message: '^Email 格式不正確'\n      }\n    },\n    customerAdd: {\n      presence: {\n        message: '^請輸入您的寄送地址'\n      }\n    }\n  };\n\n  let errors = validate(form, constraints); // 錯誤回傳 object  正確回傳 undefined\n  if (errors) {\n    let keys = Object.keys(errors);\n    keys.forEach(function (key) {\n      let el = document.querySelector(`[data-msg=${key}]`);\n      el.innerHTML = `<i class=\"fas fa-exclamation-circle mr-1\"></i>${errors[key][0]}`;\n      el.classList.toggle('invisible');\n    });\n  } else {\n    let nameValue = document.querySelector('#customerName').value;\n    let telValue = document.querySelector('#customerTel').value;\n    let emailValue = document.querySelector('#customerEmail').value;\n    let addressValue = document.querySelector('#customerAdd').value;\n    let paymentValue = document.querySelector('#paymentMethod').value;\n\n    let obj = {\n      \"data\": {\n        \"user\": {\n          \"name\": nameValue.trim(),\n          \"tel\": telValue.trim(),\n          \"email\": emailValue.trim(),\n          \"address\": addressValue.trim(),\n          \"payment\": paymentValue.trim()\n        }\n      }\n    };\n\n    axios.post(`${baseUrl}/${customOrder_path}`, obj).then(function (res) {\n      getCartListData();\n      popUpSuccessMsg('sendOrderInfoBtn');\n      const orderInputs = document.querySelectorAll('[data-js=\"orderInput\"]');\n      orderInputs.forEach(function (item) {\n        item.value = '';\n      });\n    }).catch(function (err) {\n      let errData = err.response.data;\n      if (errData.status === false) {\n        console.log(err.response.data.message);\n      }\n    })\n  };\n};\n\nfunction changeQuantity(e) {\n  let value = e.target.value;\n  let id = e.target.dataset.id;\n  let product = cartsData.carts.filter(function (item) { return item.id == id });\n  let quantityNotChanged = product[0].quantity == value; // 判斷數量有沒有改變\n  // 最後一個判斷條件 不可以帶有小數點\n  if (e.target.dataset.js !== 'quantityInput' || isNaN(value) || quantityNotChanged || (value - Math.round(value) !== 0)) { return };\n  let obj = {\n    \"data\": {\n      \"id\": id,\n      \"quantity\": Number(value)\n    }\n  };\n  axios.patch(`${baseUrl}/${carts_path}`, obj).then(function (res) {\n    getCartListData();\n  }).catch(function (err) {\n    let errData = err.response.data;\n    if (errData.status === false) {\n      console.log(err.response.data.message);\n    };\n  });\n};\n\n// 加入購物車、訂單資料成功送出提示視窗\nfunction popUpSuccessMsg(btnProp) {\n  const popUpMsg = document.querySelector('[data-js=\"popUpBlock\"] p');\n  if (btnProp === 'sendOrderInfoBtn') {\n    popUpMsg.textContent = '訂單成功送出';\n  } else if (btnProp === 'addCartBtn') {\n    popUpMsg.textContent = '成功加入購物車';\n  }\n  const popUp = document.querySelector('[data-js=\"popUpBlock\"]');\n  let styleOpacity = parseFloat(popUp.style.opacity);\n  popUp.setAttribute('data-popUp', true);\n  let fadeInBlock = window.setInterval(function () {\n    // div 逐漸浮出\n    if (styleOpacity < 10) {\n      styleOpacity += 0.5;\n      popUp.style.opacity = styleOpacity;\n    } else {\n      window.clearInterval(fadeInBlock); // 停止浮出\n\n      // div 逐漸消失\n      let fadeOutBlock = window.setInterval(function () {\n        if (styleOpacity > 0) {\n          styleOpacity -= 0.5;\n          popUp.style.opacity = styleOpacity;\n        } else {\n          popUp.setAttribute('data-popUp', false);\n          window.clearInterval(fadeOutBlock);\n        };\n      }, 50);\n    };\n  }, 30);\n};"]}