{"version":3,"sources":["all.js"],"names":["api_path","baseUrl","product_path","carts_path","customOrder_path","categorySelector","document","querySelector","productList","cartList","sendOrderInfoBtn","loadingFullScreenDiv","productsData","cartsData","addEventListener","productFilter","addCart","deleteCartProduct","sendOrderInfo","changeQuantity","init","getProductsData","axios","get","then","res","data","products","renderCategorySelector","getCartListData","err","errData","response","status","console","log","message","loadingAnimation","setAttribute","categoryAry","map","item","category","filter","index","ary","indexOf","optionStr","forEach","innerHTML","renderProductList","listStr","check","carts","some","product","id","price","toLocaleString","originPrice","origin_price","images","title","cartMsg","cartTable","length","renderCartList","str","totalPrice","quantity","finalTotal","value","filteredAry","e","target","nodeName","btnProp","dataset","js","obj","post","popUpSuccessMsg","popUp","getAttribute","Object","is","spanAry","querySelectorAll","el","style","visibility","form","constraints","customerName","presence","customerTel","format","pattern","flags","minimum","customerEmail","email","customerAdd","errors","validate","keys","key","nameValue","telValue","emailValue","addressValue","paymentValue","trim","orderInputs","quantityNotChanged","notNum","match","Number","patch","popUpMsg","styleOpacity","parseFloat","opacity","fadeInBlock","window","setInterval","clearInterval","fadeOutBlock"],"mappings":"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","file":"all.js","sourcesContent":["// 產品頁面\n// API\nconst api_path = 'calon';\nconst baseUrl = 'https://livejs-api.hexschool.io';\nconst product_path = `api/livejs/v1/customer/${api_path}/products`;\nconst carts_path = `api/livejs/v1/customer/${api_path}/carts`;\nconst customOrder_path = `api/livejs/v1/customer/${api_path}/orders`;\n\n// DOM\nconst categorySelector = document.querySelector('[name=\"categorySelector\"]');\nconst productList = document.querySelector('ul[data-js=\"productList\"]');\nconst cartList = document.querySelector('.cartList');\nconst sendOrderInfoBtn = document.querySelector('[data-js=\"sendOrderInfoBtn\"');\nconst loadingFullScreenDiv = document.querySelector('[data-js=\"loading-fullScreen\"]');\n\n// data\nlet productsData;\nlet cartsData;\n\n// event\ncategorySelector.addEventListener('change', productFilter);\nproductList.addEventListener('click', addCart);\ncartList.addEventListener('click', deleteCartProduct);\nsendOrderInfoBtn.addEventListener('click', sendOrderInfo);\ncartList.addEventListener('change', changeQuantity);\n\ninit();\n\nfunction init() {\n  getProductsData();\n};\n\nfunction getProductsData() {\n  axios.get(`${baseUrl}/${product_path}`).then(function (res) {\n    productsData = res.data.products;\n    renderCategorySelector();\n    getCartListData(); // 先跑購物車資料 後面渲染 productList 需要購物車資料\n  }).catch(function (err) {\n    let errData = err.response.data;\n    if (errData.status === false) {\n      console.log(err.response.data.message);\n    };\n  }).then(function () {\n    const loadingAnimation = document.querySelector('.productList-loading');\n    loadingAnimation.setAttribute('data-loading', 'hidden');\n  });\n};\n\nfunction renderCategorySelector() {\n  let categoryAry = productsData.map(function (item) {\n    return item.category;\n  });\n  categoryAry = categoryAry.filter(function (item, index, ary) {\n    return ary.indexOf(item) == index;\n  });\n\n  let optionStr = '<option value=\"全部\" selected>全部</option>';\n\n  categoryAry.forEach(function (item) {\n    optionStr += `<option value=\"${item}\">${item}</option>`;\n  });\n  categorySelector.innerHTML = optionStr;\n};\n\nfunction renderProductList(data) {\n  let listStr = '';\n  data.forEach(function (item) {\n    let check = cartsData.carts.some(function (product) { return product.product.id == item.id });\n    let price = item.price.toLocaleString();\n    let originPrice = item.origin_price.toLocaleString();\n    listStr += `\n      <li>\n        <div class=\"bg-cover bg-center h-75 relative\" style=\"background-image: url('${item.images}');\">\n          <div class=\"absolute top-3 -right-1 bg-dark text-white py-2 px-6\">新品</div>\n        </div>\n        <button class=\"py-3 mb-2 ${check ? 'bg-primary' : 'bg-dark'} ${check ? '' : 'hover:bg-secondary'} text-white text-lg w-full\n        transition duration-500 ${check ? 'cursor-default' : ''}\" data-js=\"addCartBtn\" data-id=\"${item.id}\" ${check ? 'disabled' : ''}>\n          ${check ? '已加入購物車' : '加入購物車'}\n        </button>\n        <div class=\"text-lg\">\n          <h5>${item.title}</h5>\n          <p class=\"line-through\">NT$${originPrice}</p>\n          <p class=\"text-3xl\">NT$${price}</p>\n        </div>\n      </li>\n    `\n  });\n  productList.innerHTML = listStr;\n};\n\nfunction getCartListData() {\n  axios.get(`${baseUrl}/${carts_path}`).then(function (res) {\n    cartsData = res.data;\n    productFilter();\n\n    const cartMsg = document.querySelector('p[data-js=\"cartMsg\"]');\n    const cartTable = document.querySelector('table[data-js=\"cartMsg\"]');\n    if (cartsData.carts.length === 0) {\n      cartMsg.setAttribute('data-cartMsg', 'show');\n      cartTable.setAttribute('data-cartMsg', 'hidden');\n    } else {\n      cartMsg.setAttribute('data-cartMsg', 'hidden');\n      cartTable.setAttribute('data-cartMsg', 'show');\n      renderCartList();\n    }\n  }).catch(function (err) {\n    let errData = err.response.data;\n    if (errData.status === false) {\n      console.log(err.response.data.message);\n    }\n  }).then(function () {\n    const loadingAnimation = document.querySelector('.cart-loading');\n    loadingAnimation.setAttribute('data-loading', 'hidden');\n  });\n};\n\nfunction renderCartList() {\n  let str = '';\n  cartsData.carts.forEach(function (item) {\n    let price = item.product.price.toLocaleString();\n    let totalPrice = (item.product.price * item.quantity).toLocaleString();\n    str += `\n    <tr class=\"border-b border-gray-300\">\n      <td class=\"flex items-center py-5\">\n        <img class=\"w-20 h-20 object-cover mr-4\" src=\"${item.product.images}\" alt=\"產品圖片\">\n        <h5>${item.product.title}</h5>\n      </td>\n      <td class=\"py-5\">NT$${price}</td>\n      <td class=\"py-5\">\n        <input class=\"w-12 border border-gray-300 rounded px-2 text-center\" data-id=\"${item.id}\" data-js=\"quantityInput\" type=\"text\" value=\"${item.quantity}\">\n      </td>\n      <td class=\"py-5\">NT$${totalPrice}</td>\n      <td class=\"text-center py-5\">\n        <button class=\"material-icons hover:text-danger transition duration-500 p-2\" href=\"#\" data-js=\"deleteProductBtn\" data-id=\"${item.id}\">close</button>\n      </td>\n    </tr>\n    `;\n  });\n  let finalTotal = cartsData.finalTotal.toLocaleString();\n  str += `\n    <tr>\n      <td class=\"py-5\">\n        <button class=\"border rounded py-2 px-5 hover:bg-dark hover:text-white transition duration-500\" data-js=\"deleteAllProductsBtn\">刪除所有品項</button>\n      </td>\n      <td class=\"py-5\"></td>\n      <td class=\"py-5\"></td>\n      <td class=\"py-5\">總金額</td>\n      <td class=\"py-5 text-3xl\">NT$${finalTotal}</td>\n    </tr>\n    `;\n  cartList.innerHTML = str;\n};\n\nfunction productFilter() {\n  let category = categorySelector.value;\n  if (category === '全部') {\n    renderProductList(productsData);\n  } else {\n    let filteredAry = productsData.filter(function (item) { return item.category == category });\n    renderProductList(filteredAry);\n  };\n};\n\nfunction addCart(e) {\n  if (e.target.nodeName !== 'BUTTON') { return };\n  let btnProp = e.target.dataset.js;\n  let id = e.target.dataset.id;\n  let obj = {\n    \"data\": {\n      \"productId\": id,\n      \"quantity\": 1\n    }\n  };\n  loadingFullScreenDiv.setAttribute('data-loading', 'show');\n  axios.post(`${baseUrl}/${carts_path}`, obj).then(function (res) {\n    getCartListData();\n    productFilter(); // 不呼叫 renderProductList() 避免已篩選渲染的 product list 出錯\n    popUpSuccessMsg(btnProp);\n  }).catch(function (err) {\n    let errData = err.response.data;\n    if (errData.status === false) {\n      console.log(err.response.data.message);\n    }\n  }).then(function () {\n    loadingFullScreenDiv.setAttribute('data-loading', 'hidden');\n  });\n};\n\nfunction deleteCartProduct(e) {\n  if (e.target.dataset.js !== 'deleteProductBtn' && e.target.dataset.js !== 'deleteAllProductsBtn') {\n    return;\n  } else if (e.target.dataset.js === 'deleteAllProductsBtn') { // 刪除購物車全部商品\n    const popUp = document.querySelector('[data-js=\"doubleCheckpopUp\"]');\n    popUp.setAttribute('data-popUp', 'show');\n    popUp.addEventListener('click', function (e) {\n      let btnProp = e.target.getAttribute('data-dblCheckBtn');\n      // double check\n      if (btnProp === 'cancel' || Object.is(popUp, e.target)) { // 按取消或非訊息視窗時隱藏 double check div\n        popUp.setAttribute('data-popUp', 'hidden');\n      } else if (btnProp === 'delete') {\n        axios.delete(`${baseUrl}/${carts_path}`).then(function (res) {\n          getCartListData();\n        }).catch(function (err) {\n          let errData = err.response.data;\n          if (errData.status === false) {\n            console.log(err.response.data.message);\n          };\n        }).then(function () {\n          popUp.setAttribute('data-popUp', 'hidden');\n        });\n      };\n    });\n  } else { // 刪除購物車單一商品\n    let id = e.target.dataset.id;\n\n    loadingFullScreenDiv.setAttribute('data-loading', 'show');\n    axios.delete(`${baseUrl}/${carts_path}/${id}`).then(function (res) {\n      getCartListData();\n    }).catch(function (err) {\n      let errData = err.response.data;\n      if (errData.status === false) {\n        console.log(err.response.data.message);\n      }\n    }).then(function () {\n      loadingFullScreenDiv.setAttribute('data-loading', 'hidden');\n    });\n  };\n};\n\nfunction sendOrderInfo(e) {\n  // 錯誤訊息初始化\n  let spanAry = document.querySelectorAll(`span[data-msg]`);\n  spanAry.forEach(function (el) {\n    el.style.visibility = 'hidden';\n  });\n\n  // 表單驗證\n  const form = document.querySelector('[data-js=\"orderForm\"]');\n  let constraints = {\n    customerName: {\n      presence: {\n        message: '^請輸入您的姓名'\n      },\n    },\n    customerTel: {\n      presence: {\n        message: '^請輸入您的聯絡電話'\n      },\n      format: {\n        pattern: '[0-9]+',\n        flags: 'i',\n        message: '^請勿輸入數字以外的文字'\n      },\n      length: {\n        minimum: 9,\n        message: '^號碼不可以少於 9 碼，室內電話請輸入區號'\n      }\n    },\n    customerEmail: {\n      presence: {\n        message: '^請輸入您的 Email'\n      },\n      email: {\n        message: '^Email 格式不正確'\n      }\n    },\n    customerAdd: {\n      presence: {\n        message: '^請輸入您的寄送地址'\n      }\n    }\n  };\n\n  let errors = validate(form, constraints); // 錯誤回傳 object  正確回傳 undefined\n  if (errors) {\n    let keys = Object.keys(errors);\n    keys.forEach(function (key) {\n      let el = document.querySelector(`[data-msg=${key}]`);\n      el.innerHTML = `<i class=\"fas fa-exclamation-circle mr-1\"></i>${errors[key][0]}`;\n      el.style.visibility = 'visible';\n    });\n  } else {\n    let nameValue = document.querySelector('#customerName').value;\n    let telValue = document.querySelector('#customerTel').value;\n    let emailValue = document.querySelector('#customerEmail').value;\n    let addressValue = document.querySelector('#customerAdd').value;\n    let paymentValue = document.querySelector('#paymentMethod').value;\n\n    let obj = {\n      \"data\": {\n        \"user\": {\n          \"name\": nameValue.trim(),\n          \"tel\": telValue.trim(),\n          \"email\": emailValue.trim(),\n          \"address\": addressValue.trim(),\n          \"payment\": paymentValue.trim()\n        }\n      }\n    };\n\n    let btnProp = e.target.dataset.js;\n\n\n    loadingFullScreenDiv.setAttribute('data-loading', 'show');\n    axios.post(`${baseUrl}/${customOrder_path}`, obj).then(function (res) {\n      getCartListData();\n      popUpSuccessMsg(btnProp);\n      const orderInputs = document.querySelectorAll('[data-js=\"orderInput\"]');\n      orderInputs.forEach(function (item) {\n        item.value = '';\n      });\n    }).catch(function (err) {\n      let errData = err.response.data;\n      if (errData.status === false) {\n        console.log(err.response.data.message);\n        popUpSuccessMsg(btnProp);\n      };\n    }).then(function () {\n      loadingFullScreenDiv.setAttribute('data-loading', 'hidden');\n    });\n  };\n};\n\nfunction changeQuantity(e) {\n  let value = e.target.value;\n  let id = e.target.dataset.id;\n  let product = cartsData.carts.filter(function (item) { return item.id == id });\n  let quantityNotChanged = product[0].quantity == value; // 判斷數量有沒有改變\n  let notNum = value.match(/[^0-9]/); // 除了數字以外的字會回傳陣列\n\n  if (e.target.dataset.js !== 'quantityInput' || quantityNotChanged || notNum) { return };\n  let obj = {\n    \"data\": {\n      \"id\": id,\n      \"quantity\": Number(value)\n    }\n  };\n\n  loadingFullScreenDiv.setAttribute('data-loading', 'show');\n  axios.patch(`${baseUrl}/${carts_path}`, obj).then(function (res) {\n    getCartListData();\n  }).catch(function (err) {\n    let errData = err.response.data;\n    if (errData.status === false) {\n      console.log(err.response.data.message);\n    };\n  }).then(function () {\n    loadingFullScreenDiv.setAttribute('data-loading', 'hidden');\n  });\n};\n\n// 加入購物車、訂單資料成功送出提示視窗\nfunction popUpSuccessMsg(btnProp) {\n  const popUpMsg = document.querySelector('[data-js=\"popUpMsg\"]');\n  if (btnProp === 'sendOrderInfoBtn') {\n    if (cartsData.carts.length === 0) {\n      popUpMsg.innerHTML = `<i class=\"fas fa-times-circle fa-4x text-danger mb-4\"></i> <p class=\"text-2xl\">購物車內沒有東西</p>`;\n    } else {\n      popUpMsg.innerHTML = `<i class=\"fas fa-check-circle fa-4x text-success mb-4\"></i> <p class=\"text-2xl\">訂單成功送出</p>`;\n    };\n  } else if (btnProp === 'addCartBtn') {\n    popUpMsg.innerHTML = `<i class=\"fas fa-check-circle fa-4x text-success mb-4\"></i> <p class=\"text-2xl\">成功加入購物車</p>`;\n  };\n\n  const popUp = document.querySelector('[data-js=\"popUpBlock\"]');\n  let styleOpacity = parseFloat(popUp.style.opacity);\n  popUp.setAttribute('data-popUp', 'show');\n  let fadeInBlock = window.setInterval(function () {\n    // div 逐漸浮出\n    if (styleOpacity < 10) {\n      styleOpacity += 0.5;\n      popUp.style.opacity = styleOpacity;\n    } else {\n      window.clearInterval(fadeInBlock); // 停止浮出\n\n      // div 逐漸消失\n      let fadeOutBlock = window.setInterval(function () {\n        if (styleOpacity > 0) {\n          styleOpacity -= 0.5;\n          popUp.style.opacity = styleOpacity;\n        } else {\n          popUp.setAttribute('data-popUp', 'hidden');\n          window.clearInterval(fadeOutBlock);\n        };\n      }, 50);\n    };\n  }, 30);\n};"]}