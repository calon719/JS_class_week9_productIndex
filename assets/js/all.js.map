{"version":3,"sources":["all.js"],"names":["api_path","baseUrl","product_path","carts_path","customOrder_path","categorySelector","document","querySelector","cartList","deleteAllProductsBtn","loadingFullScreenDiv","productList","sendOrderInfoBtn","cartsData","productsData","addEventListener","productFilter","deleteCartProduct","changeQuantity","deleteAllProducts","addCart","sendOrderInfo","init","getProductsData","axios","get","then","res","data","products","renderCategorySelector","getCartListData","err","errData","response","status","console","log","message","loadingAnimation","setAttribute","categoryAry","map","item","category","filter","index","ary","indexOf","optionStr","forEach","innerHTML","renderProductList","listStr","check","carts","some","product","id","price","toLocaleString","originPrice","origin_price","images","title","renderCartList","cartMsg","cartTable","length","totalPrice","quantity","cartTotal","finalTotal","textContent","value","filteredAry","e","target","nodeName","btnProp","dataset","js","obj","post","popUpSuccessMsg","targetJS","popUp","getAttribute","Object","is","spanAry","querySelectorAll","el","style","visibility","form","constraints","customerName","presence","customerTel","format","pattern","flags","minimum","customerEmail","email","customerAdd","errors","validate","keys","key","nameValue","telValue","emailValue","addressValue","paymentValue","trim","orderInputs","quantityNotChanged","isNum","match","Number","patch","popUpMsg","styleOpacity","parseFloat","opacity","fadeInBlock","window","setInterval","clearInterval","fadeOutBlock"],"mappings":"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","file":"all.js","sourcesContent":["// 產品頁面\n// API\nconst api_path = 'calon';\nconst baseUrl = 'https://livejs-api.hexschool.io';\nconst product_path = `api/livejs/v1/customer/${api_path}/products`;\nconst carts_path = `api/livejs/v1/customer/${api_path}/carts`;\nconst customOrder_path = `api/livejs/v1/customer/${api_path}/orders`;\n\n// DOM\nconst categorySelector = document.querySelector('[name=\"categorySelector\"]');\nconst cartList = document.querySelector('.cartList');\nconst deleteAllProductsBtn = document.querySelector('[data-js=\"deleteAllProductsBtn\"]');\nconst loadingFullScreenDiv = document.querySelector('[data-js=\"loading-fullScreen\"]');\nconst productList = document.querySelector('ul[data-js=\"productList\"]');\nconst sendOrderInfoBtn = document.querySelector('[data-js=\"sendOrderInfoBtn\"');\n\n// data\nlet cartsData = [];\nlet productsData = [];\n\n// event\ncategorySelector.addEventListener('change', productFilter);\ncartList.addEventListener('click', deleteCartProduct);\ncartList.addEventListener('change', changeQuantity);\ndeleteAllProductsBtn.addEventListener('click', deleteAllProducts);\nproductList.addEventListener('click', addCart);\nsendOrderInfoBtn.addEventListener('click', sendOrderInfo);\n\ninit();\n\nfunction init() {\n  getProductsData();\n};\n\nfunction getProductsData() {\n  axios.get(`${baseUrl}/${product_path}`).then(res => {\n    productsData = res.data.products;\n    renderCategorySelector();\n    getCartListData();\n  }).catch(err => {\n    let errData = err.response.data;\n    if (errData.status === false) {\n      console.log(err.response.data.message);\n    };\n  }).then(() => {\n    const loadingAnimation = document.querySelector('.productList-loading');\n    loadingAnimation.setAttribute('data-loading', 'hidden');\n  });\n};\n\nfunction renderCategorySelector() {\n  let categoryAry = productsData.map(item => item.category);\n  categoryAry = categoryAry.filter((item, index, ary) => ary.indexOf(item) == index);\n\n  let optionStr = '<option value=\"全部\" selected>全部</option>';\n  categoryAry.forEach(item => { optionStr += `<option value=\"${item}\">${item}</option>` });\n  categorySelector.innerHTML = optionStr;\n};\n\nfunction renderProductList(data) {\n  let listStr = '';\n  data.forEach(item => {\n    let check = cartsData.carts.some(product => product.product.id == item.id);\n    let price = item.price.toLocaleString();\n    let originPrice = item.origin_price.toLocaleString();\n    listStr += `\n      <li>\n        <div class=\"bg-cover bg-center h-75 relative\" style=\"background-image: url('${item.images}');\">\n          <div class=\"absolute top-3 -right-1 bg-dark text-white py-2 px-6\">新品</div>\n        </div>\n        <button class=\"py-3 mb-2 ${check ? 'bg-primary' : 'bg-dark'} ${check ? '' : 'hover:bg-secondary'} text-white text-lg w-full\n        transition duration-500 ${check ? 'cursor-default' : ''}\" data-js=\"addCartBtn\" data-id=\"${item.id}\" ${check ? 'disabled' : ''}>\n          ${check ? '已加入購物車' : '加入購物車'}\n        </button>\n        <div class=\"text-lg\">\n          <h5>${item.title}</h5>\n          <p class=\"line-through\">NT$${originPrice}</p>\n          <p class=\"text-3xl\">NT$${price}</p>\n        </div>\n      </li>\n    `\n  });\n  productList.innerHTML = listStr;\n};\n\nfunction getCartListData() {\n  axios.get(`${baseUrl}/${carts_path}`).then(res => {\n    cartsData = res.data;\n    renderProductList(productsData); // 需要用到購物車資料，所以要等拿到購物車資料再做產品列表渲染\n    renderCartList();\n  }).catch(err => {\n    let errData = err.response.data;\n    if (errData.status === false) {\n      console.log(err.response.data.message);\n    }\n  }).then(() => {\n    const loadingAnimation = document.querySelector('.cart-loading');\n    loadingAnimation.setAttribute('data-loading', 'hidden');\n  });\n};\n\nfunction renderCartList() {\n  // 沒有商品在購物車時，隱藏 table，有的時候渲染 cartList\n  const cartMsg = document.querySelector('p[data-js=\"cartMsg\"]');\n  const cartTable = document.querySelector('table[data-js=\"cartMsg\"]');\n  if (cartsData.carts.length === 0) {\n    cartMsg.setAttribute('data-cartMsg', 'show');\n    cartTable.setAttribute('data-cartMsg', 'hidden');\n  } else {\n    cartMsg.setAttribute('data-cartMsg', 'hidden');\n    cartTable.setAttribute('data-cartMsg', 'show');\n\n    let listStr = '';\n    cartsData.carts.forEach(item => {\n      const price = item.product.price.toLocaleString();\n      const totalPrice = (item.product.price * item.quantity).toLocaleString();\n      listStr += `\n      <tr class=\"border-b border-gray-300\">\n        <td class=\"flex items-center py-5\">\n          <img class=\"w-20 h-20 object-cover mr-4\" src=\"${item.product.images}\" alt=\"產品圖片\">\n          <h5>${item.product.title}</h5>\n        </td>\n        <td class=\"py-5\">NT$${price}</td>\n        <td class=\"py-5\">\n          <input class=\"w-12 border border-gray-300 rounded px-2 text-center\" data-id=\"${item.id}\" data-js=\"quantityInput\" type=\"text\" value=\"${item.quantity}\">\n        </td>\n        <td class=\"py-5\">NT$${totalPrice}</td>\n        <td class=\"text-center py-5\">\n          <button class=\"material-icons hover:text-danger transition duration-500 p-2\" href=\"#\" data-js=\"deleteProductBtn\" data-id=\"${item.id}\">close</button>\n        </td>\n      </tr>\n      `;\n    });\n    cartList.innerHTML = listStr;\n\n    const cartTotal = document.querySelector('[data-js=\"cartTotal\"]');\n    const finalTotal = cartsData.finalTotal.toLocaleString();\n    cartTotal.textContent = `NT$${finalTotal}`;\n  };\n};\n\nfunction productFilter() {\n  let category = categorySelector.value;\n  if (category === '全部') {\n    renderProductList(productsData);\n  } else {\n    let filteredAry = productsData.filter(item => item.category == category);\n    renderProductList(filteredAry);\n  };\n};\n\nfunction addCart(e) {\n  if (e.target.nodeName !== 'BUTTON') { return };\n  let btnProp = e.target.dataset.js;\n  let id = e.target.dataset.id;\n  let obj = {\n    \"data\": {\n      \"productId\": id,\n      \"quantity\": 1\n    }\n  };\n  loadingFullScreenDiv.setAttribute('data-loading', 'show');\n  axios.post(`${baseUrl}/${carts_path}`, obj).then(res => {\n    cartsData = res.data;\n    renderCartList();\n    productFilter(); // 不呼叫 renderProductList() 避免已篩選渲染的 product list 出錯\n    popUpSuccessMsg(btnProp);\n  }).catch(err => {\n    let errData = err.response.data;\n    if (errData.status === false) {\n      console.log(err.response.data.message);\n    };\n  }).then(() => {\n    loadingFullScreenDiv.setAttribute('data-loading', 'hidden');\n  });\n};\n\nfunction deleteCartProduct(e) {\n  const targetJS = e.target.dataset.js;\n  if (targetJS !== 'deleteProductBtn') { return };\n\n  let id = e.target.dataset.id;\n  loadingFullScreenDiv.setAttribute('data-loading', 'show');\n  axios.delete(`${baseUrl}/${carts_path}/${id}`).then(res => {\n    cartsData = res.data;\n    renderCartList();\n    productFilter(); // 不呼叫 renderProductList() 避免已篩選渲染的 product list 出錯\n  }).catch(err => {\n    let errData = err.response.data;\n    if (errData.status === false) {\n      console.log(err.response.data.message);\n    }\n  }).then(() => {\n    loadingFullScreenDiv.setAttribute('data-loading', 'hidden');\n  });\n};\n\nfunction deleteAllProducts() {\n  // double check\n  const popUp = document.querySelector('[data-js=\"doubleCheckpopUp\"]');\n  popUp.setAttribute('data-popUp', 'show');\n  popUp.addEventListener('click', e => {\n    let btnProp = e.target.getAttribute('data-dblCheckBtn');\n    if (btnProp === 'cancel' || Object.is(popUp, e.target)) { // 按取消或非訊息視窗時隱藏 double check div\n      popUp.setAttribute('data-popUp', 'hidden');\n    } else if (btnProp === 'delete') {\n      axios.delete(`${baseUrl}/${carts_path}`).then(res => {\n        cartsData = res.data;\n        renderCartList();\n        productFilter();\n      }).catch(err => {\n        let errData = err.response.data;\n        if (errData.status === false) {\n          console.log(err.response.data.message);\n        };\n      }).then(() => {\n        popUp.setAttribute('data-popUp', 'hidden');\n      });\n    };\n  });\n};\n\nfunction sendOrderInfo(e) {\n  // 錯誤訊息初始化\n  let spanAry = document.querySelectorAll(`span[data-msg]`);\n  spanAry.forEach(el => {\n    el.style.visibility = 'hidden';\n  });\n\n  // 表單驗證\n  const form = document.querySelector('[data-js=\"orderForm\"]');\n  let constraints = {\n    customerName: {\n      presence: {\n        message: '^請輸入您的姓名'\n      },\n    },\n    customerTel: {\n      presence: {\n        message: '^請輸入您的聯絡電話'\n      },\n      format: {\n        pattern: '[0-9]+',\n        flags: 'i',\n        message: '^請勿輸入數字以外的文字'\n      },\n      length: {\n        minimum: 9,\n        message: '^號碼不可以少於 9 碼，室內電話請輸入區號'\n      }\n    },\n    customerEmail: {\n      presence: {\n        message: '^請輸入您的 Email'\n      },\n      email: {\n        message: '^Email 格式不正確'\n      }\n    },\n    customerAdd: {\n      presence: {\n        message: '^請輸入您的寄送地址'\n      }\n    }\n  };\n\n  let errors = validate(form, constraints); // 錯誤回傳 object  正確回傳 undefined\n  if (errors) {\n    let keys = Object.keys(errors);\n    keys.forEach(key => {\n      let el = document.querySelector(`[data-msg=${key}]`);\n      el.innerHTML = `<i class=\"fas fa-exclamation-circle mr-1\"></i>${errors[key][0]}`;\n      el.style.visibility = 'visible';\n    });\n  } else {\n    let nameValue = document.querySelector('#customerName').value;\n    let telValue = document.querySelector('#customerTel').value;\n    let emailValue = document.querySelector('#customerEmail').value;\n    let addressValue = document.querySelector('#customerAdd').value;\n    let paymentValue = document.querySelector('#paymentMethod').value;\n\n    let obj = {\n      \"data\": {\n        \"user\": {\n          \"name\": nameValue.trim(),\n          \"tel\": telValue.trim(),\n          \"email\": emailValue.trim(),\n          \"address\": addressValue.trim(),\n          \"payment\": paymentValue.trim()\n        }\n      }\n    };\n\n    let btnProp = e.target.dataset.js;\n\n    loadingFullScreenDiv.setAttribute('data-loading', 'show');\n    axios.post(`${baseUrl}/${customOrder_path}`, obj).then(res => {\n      getCartListData();\n      popUpSuccessMsg(btnProp);\n      const orderInputs = document.querySelectorAll('[data-js=\"orderInput\"]');\n      orderInputs.forEach(function (item) {\n        item.value = '';\n      });\n    }).catch(err => {\n      let errData = err.response.data;\n      if (errData.status === false) {\n        console.log(err.response.data.message);\n        popUpSuccessMsg(btnProp);\n      };\n    }).then(() => {\n      loadingFullScreenDiv.setAttribute('data-loading', 'hidden');\n    });\n  };\n};\n\nfunction changeQuantity(e) {\n  let value = e.target.value;\n  let id = e.target.dataset.id;\n  let product = cartsData.carts.filter(item => item.id == id)[0];\n  let quantityNotChanged = product.quantity == value; // 判斷數量有沒有改變\n  let isNum = value.match(/[1-9]/); // 除了數字以外的字會回傳陣列\n\n  if (e.target.dataset.js !== 'quantityInput' || quantityNotChanged || !isNum || value < 0) { return };\n  let obj = {\n    \"data\": {\n      \"id\": id,\n      \"quantity\": Number(value)\n    }\n  };\n\n  loadingFullScreenDiv.setAttribute('data-loading', 'show');\n  axios.patch(`${baseUrl}/${carts_path}`, obj).then(res => {\n    cartsData = res.data;\n    renderCartList();\n  }).catch(err => {\n    let errData = err.response.data;\n    if (errData.status === false) {\n      console.log(err.response.data.message);\n    };\n  }).then(() => {\n    loadingFullScreenDiv.setAttribute('data-loading', 'hidden');\n  });\n};\n\n// 加入購物車、訂單資料送出提示視窗\nfunction popUpSuccessMsg(btnProp) {\n  const popUpMsg = document.querySelector('[data-js=\"popUpMsg\"]');\n  if (btnProp === 'sendOrderInfoBtn') {\n    if (cartsData.carts.length === 0) {\n      popUpMsg.innerHTML = `<i class=\"fas fa-times-circle fa-4x text-danger mb-4\"></i> <p class=\"text-2xl\">購物車內沒有東西</p>`;\n    } else {\n      popUpMsg.innerHTML = `<i class=\"fas fa-check-circle fa-4x text-success mb-4\"></i> <p class=\"text-2xl\">訂單成功送出</p>`;\n    };\n  } else if (btnProp === 'addCartBtn') {\n    popUpMsg.innerHTML = `<i class=\"fas fa-check-circle fa-4x text-success mb-4\"></i> <p class=\"text-2xl\">成功加入購物車</p>`;\n  };\n\n  const popUp = document.querySelector('[data-js=\"popUpBlock\"]');\n  let styleOpacity = parseFloat(popUp.style.opacity);\n  popUp.setAttribute('data-popUp', 'show');\n  let fadeInBlock = window.setInterval(() => {\n    // div 逐漸浮出\n    if (styleOpacity < 10) {\n      styleOpacity += 0.5;\n      popUp.style.opacity = styleOpacity;\n    } else {\n      window.clearInterval(fadeInBlock); // 停止浮出\n\n      // div 逐漸消失\n      let fadeOutBlock = window.setInterval(() => {\n        if (styleOpacity > 0) {\n          styleOpacity -= 0.5;\n          popUp.style.opacity = styleOpacity;\n        } else {\n          popUp.setAttribute('data-popUp', 'hidden');\n          window.clearInterval(fadeOutBlock);\n        };\n      }, 50);\n    };\n  }, 30);\n};"]}